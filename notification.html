<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Desktop Notifications</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <button id="dntrigger">Trigger</button>        
        <script>
            var dntrigger = document.getElementById('dntrigger');
            if(!window.Notification){
                console.log('Sorry, notifications are not supported');
            } else {
                    Notification.requestPermission(function(p){
                        if(p === 'denied'){
                            alert('You have denied notifications');
                        } else if(p === 'granted') {
                            var notify;
                            notify = new Notification('Notificatons allowed', {
                                body: 'Thank you for allowing notificatons from our site'
                            });
                        }
                    }
            dntrigger.addEventListener('click', function(e){
                var notify;
                
                e.preventDefault();
                
                if(Notification.permission === 'default'){
                    // Notifications not allowed, do nothing.
                } else {
                    notify = new Notification('New message from Alex', {
                        body: 'New user added, please verify',
                        icon: '',
                        tag: '1234'
                    });
                    
                    notify.onclick = function(){
                        window.location = '?message=' + this.tag;
                    }
                }
                
            });
        </script>
    </body>
</html>
